{"ast":null,"code":"var supported;\nexport function isGeolocationSupported() {\n  if (supported !== undefined) {\n    return Promise.resolve(supported);\n  }\n\n  if (window.navigator.permissions !== undefined) {\n    return window.navigator.permissions.query({\n      name: 'geolocation'\n    }).then(function (p) {\n      supported = p.state !== 'denied';\n      return supported;\n    });\n  }\n\n  supported = Boolean(window.navigator.geolocation);\n  return Promise.resolve(supported);\n}","map":{"version":3,"mappings":"AACA,IAAIA,SAAJ;AAEA,OAAO,SAASC,sBAAT,GAAkC;AAEvC,MAAID,SAAS,KAAKE,SAAlB,EAA6B;AAC3B,WAAOC,OAAO,CAACC,OAARD,CAAgBH,SAAhBG,CAAP;AACD;;AAED,MAAIE,MAAM,CAACC,SAAPD,CAAiBE,WAAjBF,KAAiCH,SAArC,EAAgD;AAK9C,WAAOG,MAAM,CAACC,SAAPD,CAAiBE,WAAjBF,CAA6BG,KAA7BH,CAAmC;AAACI,UAAI,EAAE;AAAP,KAAnCJ,EAA0DK,IAA1DL,CAA+D,aAAK;AACzEL,eAAS,GAAGW,CAAC,CAACC,KAAFD,KAAY,QAAxBX;AACA,aAAOA,SAAP;AAFK,MAAP;AAID;;AAEDA,WAAS,GAAGa,OAAO,CAACR,MAAM,CAACC,SAAPD,CAAiBS,WAAlB,CAAnBd;AACA,SAAOG,OAAO,CAACC,OAARD,CAAgBH,SAAhBG,CAAP;AACD","names":["supported","isGeolocationSupported","undefined","Promise","resolve","window","navigator","permissions","query","name","then","p","state","Boolean","geolocation"],"sources":["../../../src/utils/geolocate-utils.js"],"sourcesContent":["/* global window */\nlet supported;\n\nexport function isGeolocationSupported() {\n  // not necessary to check again\n  if (supported !== undefined) {\n    return Promise.resolve(supported);\n  }\n\n  if (window.navigator.permissions !== undefined) {\n    // navigator.permissions has incomplete browser support\n    // http://caniuse.com/#feat=permissions-api\n    // Test for the case where a browser disables Geolocation because of an\n    // insecure origin\n    return window.navigator.permissions.query({name: 'geolocation'}).then(p => {\n      supported = p.state !== 'denied';\n      return supported;\n    });\n  }\n\n  supported = Boolean(window.navigator.geolocation);\n  return Promise.resolve(supported);\n}\n"]},"metadata":{},"sourceType":"module"}